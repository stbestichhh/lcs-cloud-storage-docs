# RESTful API

# Endpoints

## Authentication

### `POST /auth/signup`

Create user account.

### Request

```json
{
  "body":
    "name": "myname",
    "email": "email@email.com",
    "password": "mypass",
}
```

### Response

```json
{
    "message": "Successfully signed up."
}
```

### Possible exceptions

```
400 | No request body provided 'Any filed from request body is missing'
400 | Email is wrong format 'Not an email'
400 | Password it too weak 'Password is less than 6 characters length'
403 | Forbidden 'If email already registred'
```

### `POST /auth/signin`

Login to user account.

### Request

```json
{
  "body":
    "email": "email@email.com",
    "password": "mypass",
}
```

### Response

```json
{
    "message": "Successfully signed in."
}
```

### Possible exceptions

```
400 | No request body provided 'Any filed from request body is missing'
400 | Email is wrong format 'Not an email'
404 | Credentials are incorrect. 'User not found in database'
404 | Credentials are incorrect. 'If password is wrong'
```

## Filesystem

### `GET /storage/cmd/cat`

Shows files content

### Authentication

```
Bearer <auth token>
```

### Request

```json
{
  "body":
    "path": "dir1/file.txt",
}
```

### Response

```json
{
    "content": "some content"
}
```

### Possible exceptions

```
400 | Path does not exists 'If specified path not exists'
```


### `GET /storage/cmd/ls`

Lists directory content on the specified path

### Authentication

```
Bearer <auth token>
```

### Request

```json
{
  "body":
    "path": "dir1",
}
```

### Response

```json
[
  "dir2",
  "nesteddir",
  "file.txt"
]
```

### Possible exceptions

```
400 | Path does not exists 'If specified path not exists'
400 | Using ls command on a file
```

### `POST /storage/cmd/md`

Creates directory in the specified path. If path not exists, will create directory recursively.

### Authentication

```
Bearer <auth token>
```

### Request

```json
{
  "body":
    "path": "dir1/nesteddir",
    "dirname": "dir3"
}
```

### Possible exceptions

```
400 | No name provided 'If 'dirname' in request body is missing' or path not exists
```

### `POST /storage/cmd/touch`

Creates file in the specified path. If path not exists, will create throw error.

### Authentication

```
Bearer <auth token>
```

### Request

```json
{
    "path": "dir1/nesteddir/file.txt"
    "content": "some content"
}
```

### Response

```json
{
    "message": "File created"
}
```

### Possible exceptions

```
400 | No such file or directory 'path does not exists'
```

### `PUT /storage/cmd/mv`

Moves file or directory to the specified path or rename them.

### Authentication

```
Bearer <auth token>
```

### Request

```json
{
  "path": "dir1/dir2"
  "newpath": "dir1/nesteddir/dir2"
}
```

### Response

### Possible exceptions

```
400 | No body provided 'If 'newDirpath' in request body is missing'
400 | No such file or directory 'path specified in 'newDirpath' does not exists'
```

### `DELETE /storage/cmd/rmrf`

Removes not empty directories and files

### Authentication

```
Bearer <auth token>
```

### Request

```json
{
  "body":
    "path": "dir1/nesteddir",
}
```

### Response

```json
{
    "message": "Directory removed."
}
```

### Possible exceptions

```
400 | No such file or directory 'Target path does not exists'
```

### `DELETE /storage/cmd/rm`

Removes empty directories and files

### Authentication

```
Bearer <auth token>
```

### Request

```json
{
  "body":
    "path": "file.txt",
}
```

### Response

```json
{
    "message": "File removed."
}
```

### Possible exceptions

```
400 | No such file or directory 'Target path does not exists'
```

### `POST /storage/cmd/ul`

Uploads file or files to the specified path. If target directory not exists it creates a new one recursively

### Authentication

```
Bearer <auth token>
```

### Request

#### Url example

```json
{
  "body":
    "path": "dir1",
}
```

#### multipart/form-data

`file`: optional

Example: `file:///Users/user/Files/file.txt`

### Response

```json
{
    "message": "Uploaded."
}
```

### `GET /storage/cmd/dl`

Downloads file from specified path

### Authentication

```
Bearer <auth token>
```

### Request

#### Url example

```json
{
  "body":
    "path": "dir1/file.txt",
}
```

### Possible exceptions

```
400 | No such file 'Target path does not exists'
```

### `GET /storage/cmd/tree`

Returns directory tree

### Authentication

```
Bearer <auth token>
```

### Request

#### Url example

```json
{
  "body":
    "path": "dir1",
}
```

### Response

```json
{
    "tree": {
      "dir1": {
        "nesteddir": {
          "dir3": {}
        }
        "file.txt": null
      }
    }
}
```

### Possible exceptions

```
400 | No such file 'Target path does not exists'
```

### `GET /user/me`

Return currently logged in user

### Authentication

```
Bearer <auth token>
```

### Response

```json
{
    "user": {
      "username": "myname"
      ...
    }
}
```

### `PATCH /user/me`

Edit user data

### Authentication

```
Bearer <auth token>
```

### Request

#### Url example

```json
{
  "body":
    "username": "newname",
    "password": "newpassword"
}
```
